import{z as e}from"./vendor-amplify--Mqz53-D.js";import{a as s,L as t}from"./vendor-react-BcQzlVW4.js";import{c as a}from"./index-DdKmiHhW.js";import{C as r}from"./ConfirmDialog-BVTJzjAX.js";import{P as o,T as i,C as l,A as n}from"./vendor-icons-BYRHc9LL.js";const d=()=>{var d;const[c,m]=s.useState([]),[x,u]=s.useState(!0),[g,p]=s.useState(!1),[h,f]=s.useState({isOpen:!1,program:null}),[b,j]=s.useState({name:"",durationWeeks:12});s.useEffect(()=>{y()},[]);const y=async()=>{try{const e=await a.models.Program.list();m(e.data)}catch(e){}finally{u(!1)}};return x?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Workout Programs"}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[e.jsx(o,{className:"h-5 w-5"}),e.jsx("span",{children:"New Program"})]})]}),g&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Program"}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{await a.models.Program.create({name:b.name,durationWeeks:b.durationWeeks}),j({name:"",durationWeeks:12}),p(!1),y()}catch(s){}},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program Name"}),e.jsx("input",{type:"text",required:!0,value:b.name,onChange:e=>j(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter program name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (weeks)"}),e.jsx("input",{type:"number",min:"1",max:"52",required:!0,value:b.durationWeeks,onChange:e=>j(s=>({...s,durationWeeks:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:"Create Program"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-md transition-colors",children:"Cancel"})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:c.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6 border-l-4 border-blue-600 relative group",children:[e.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),f({isOpen:!0,program:s})},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-red-100 rounded-full text-red-500 hover:text-red-700",title:"Delete Program",children:e.jsx(i,{className:"h-4 w-4"})}),e.jsx(t,{to:`/program/${s.id}`,className:"block",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 pr-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(l,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[s.durationWeeks," weeks"]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(n,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:["Week ",s.currentWeek||1]})]})]}),s.isActive&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Active"})]})})]},s.id))}),0===c.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(n,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No programs yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first workout program to get started."}),e.jsx("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Create Program"})]}),e.jsx(r,{isOpen:h.isOpen,title:"Delete Program",message:`Are you sure you want to delete "${null==(d=h.program)?void 0:d.name}"? This will permanently delete all workouts, exercises, and logged data. This action cannot be undone.`,confirmText:"Delete Program",onConfirm:()=>h.program&&(async e=>{try{const s=await a.models.Workout.list({filter:{programId:{eq:e.id}}});for(const e of s.data){const s=await a.models.Exercise.list({filter:{workoutId:{eq:e.id}}});for(const e of s.data){const s=await a.models.ExerciseWeekConfig.list({filter:{exerciseId:{eq:e.id}}});for(const e of s.data)await a.models.ExerciseWeekConfig.delete({id:e.id});const t=await a.models.ExerciseLog.list({filter:{exerciseId:{eq:e.id}}});for(const e of t.data){const s=await a.models.SetLog.list({filter:{exerciseLogId:{eq:e.id}}});for(const e of s.data)await a.models.SetLog.delete({id:e.id});await a.models.ExerciseLog.delete({id:e.id})}await a.models.Exercise.delete({id:e.id})}await a.models.Workout.delete({id:e.id})}const t=await a.models.WorkoutLog.list({filter:{programId:{eq:e.id}}});for(const e of t.data)await a.models.WorkoutLog.delete({id:e.id});await a.models.Program.delete({id:e.id}),m(c.filter(s=>s.id!==e.id)),f({isOpen:!1,program:null})}catch(s){alert("Failed to delete program. Please try again.")}})(h.program),onCancel:()=>f({isOpen:!1,program:null}),dangerous:!0})]})};export{d as default};
